================================================================================
GRAFANA TRADING DASHBOARDS - HFT SYSTEM MONITORING
Complete Grafana Dashboard Configurations for High-Frequency Trading
================================================================================

OVERVIEW
--------
This file contains comprehensive Grafana dashboard configurations for monitoring
HFT trading systems, including metrics, panels, queries, and alerting rules.

================================================================================
MAIN TRADING DASHBOARD JSON CONFIGURATION
================================================================================

{
  "dashboard": {
    "id": null,
    "uid": "hft-trading-main",
    "title": "HFT Trading System - Main Dashboard",
    "tags": ["trading", "hft", "production"],
    "timezone": "UTC",
    "schemaVersion": 38,
    "version": 1,
    "refresh": "1s",
    "time": {
      "from": "now-15m",
      "to": "now"
    },
    "timepicker": {
      "refresh_intervals": ["100ms", "500ms", "1s", "5s", "10s"],
      "time_options": ["5m", "15m", "1h", "6h", "12h", "24h"]
    },
    "annotations": {
      "list": [
        {
          "name": "Trade Executions",
          "datasource": "Prometheus",
          "enable": true,
          "expr": "changes(hft_trades_total[1m]) > 0",
          "iconColor": "green",
          "step": "1s"
        },
        {
          "name": "Risk Alerts",
          "datasource": "Prometheus",
          "enable": true,
          "expr": "hft_risk_alerts_total",
          "iconColor": "red",
          "step": "1s"
        },
        {
          "name": "System Events",
          "datasource": "PostgreSQL",
          "enable": true,
          "query": "SELECT time, event_type, description FROM system_events WHERE $__timeFilter(time)"
        }
      ]
    },
    "templating": {
      "list": [
        {
          "name": "strategy",
          "type": "query",
          "datasource": "Prometheus",
          "query": "label_values(hft_strategy_pnl, strategy)",
          "multi": true,
          "includeAll": true,
          "refresh": 1
        },
        {
          "name": "symbol",
          "type": "query",
          "datasource": "Prometheus",
          "query": "label_values(hft_market_data_latency, symbol)",
          "multi": true,
          "includeAll": true,
          "refresh": 1
        },
        {
          "name": "exchange",
          "type": "query",
          "datasource": "Prometheus",
          "query": "label_values(hft_order_latency, exchange)",
          "multi": true,
          "includeAll": true,
          "refresh": 1
        }
      ]
    },
    "panels": []
  }
}

================================================================================
PANEL CONFIGURATIONS - LATENCY MONITORING
================================================================================

# Panel 1: Order-to-Exchange Latency (Heatmap)
{
  "id": 1,
  "gridPos": {"h": 8, "w": 12, "x": 0, "y": 0},
  "type": "heatmap",
  "title": "Order-to-Exchange Latency Distribution (µs)",
  "datasource": "Prometheus",
  "targets": [
    {
      "expr": "histogram_quantile(0.50, sum(rate(hft_order_latency_microseconds_bucket{exchange=~\"$exchange\"}[1m])) by (le))",
      "legendFormat": "p50",
      "refId": "A"
    },
    {
      "expr": "histogram_quantile(0.95, sum(rate(hft_order_latency_microseconds_bucket{exchange=~\"$exchange\"}[1m])) by (le))",
      "legendFormat": "p95",
      "refId": "B"
    },
    {
      "expr": "histogram_quantile(0.99, sum(rate(hft_order_latency_microseconds_bucket{exchange=~\"$exchange\"}[1m])) by (le))",
      "legendFormat": "p99",
      "refId": "C"
    }
  ],
  "options": {
    "calculate": true,
    "calculation": {
      "xBuckets": {
        "mode": "size",
        "value": "10us"
      }
    },
    "color": {
      "mode": "scheme",
      "scheme": "Spectral",
      "steps": 128
    },
    "yAxis": {
      "unit": "µs",
      "decimals": 0
    }
  },
  "fieldConfig": {
    "defaults": {
      "custom": {
        "hideFrom": {
          "tooltip": false,
          "viz": false,
          "legend": false
        }
      }
    }
  }
}

# Panel 2: Market Data Latency Time Series
{
  "id": 2,
  "gridPos": {"h": 8, "w": 12, "x": 12, "y": 0},
  "type": "timeseries",
  "title": "Market Data Feed Latency (µs)",
  "datasource": "Prometheus",
  "targets": [
    {
      "expr": "histogram_quantile(0.50, sum(rate(hft_market_data_latency_bucket{symbol=~\"$symbol\"}[10s])) by (le, symbol))",
      "legendFormat": "{{symbol}} - p50",
      "refId": "A"
    },
    {
      "expr": "histogram_quantile(0.99, sum(rate(hft_market_data_latency_bucket{symbol=~\"$symbol\"}[10s])) by (le, symbol))",
      "legendFormat": "{{symbol}} - p99",
      "refId": "B"
    }
  ],
  "fieldConfig": {
    "defaults": {
      "custom": {
        "drawStyle": "line",
        "lineInterpolation": "smooth",
        "lineWidth": 2,
        "fillOpacity": 10,
        "showPoints": "never",
        "axisPlacement": "auto"
      },
      "unit": "µs",
      "min": 0,
      "thresholds": {
        "mode": "absolute",
        "steps": [
          {"value": null, "color": "green"},
          {"value": 100, "color": "yellow"},
          {"value": 500, "color": "red"}
        ]
      }
    }
  },
  "options": {
    "tooltip": {
      "mode": "multi",
      "sort": "none"
    },
    "legend": {
      "displayMode": "table",
      "placement": "right",
      "calcs": ["lastNotNull", "max", "mean"]
    }
  }
}

================================================================================
PANEL CONFIGURATIONS - TRADING METRICS
================================================================================

# Panel 3: Real-Time P&L by Strategy
{
  "id": 3,
  "gridPos": {"h": 8, "w": 8, "x": 0, "y": 8},
  "type": "timeseries",
  "title": "Strategy P&L (Real-Time)",
  "datasource": "Prometheus",
  "targets": [
    {
      "expr": "hft_strategy_pnl_usd{strategy=~\"$strategy\"}",
      "legendFormat": "{{strategy}}",
      "refId": "A"
    },
    {
      "expr": "hft_strategy_pnl_usd{strategy=~\"$strategy\"} - hft_strategy_pnl_usd{strategy=~\"$strategy\"} offset 1h",
      "legendFormat": "{{strategy}} (1h change)",
      "refId": "B"
    }
  ],
  "fieldConfig": {
    "defaults": {
      "custom": {
        "drawStyle": "line",
        "lineInterpolation": "smooth",
        "lineWidth": 2,
        "fillOpacity": 20,
        "gradientMode": "scheme"
      },
      "unit": "currencyUSD",
      "decimals": 2,
      "color": {
        "mode": "palette-classic"
      }
    },
    "overrides": [
      {
        "matcher": {"id": "byRegexp", "options": ".*1h change.*"},
        "properties": [
          {
            "id": "custom.lineStyle",
            "value": {"fill": "dash", "dash": [10, 5]}
          }
        ]
      }
    ]
  }
}

# Panel 4: Trade Volume and Count
{
  "id": 4,
  "gridPos": {"h": 8, "w": 8, "x": 8, "y": 8},
  "type": "timeseries",
  "title": "Trading Volume and Count",
  "datasource": "Prometheus",
  "targets": [
    {
      "expr": "sum(rate(hft_trades_total{strategy=~\"$strategy\"}[1m])) * 60",
      "legendFormat": "Trades/min",
      "refId": "A",
      "yAxisIndex": 0
    },
    {
      "expr": "sum(rate(hft_trade_volume_usd{strategy=~\"$strategy\"}[1m])) * 60",
      "legendFormat": "Volume USD/min",
      "refId": "B",
      "yAxisIndex": 1
    }
  ],
  "fieldConfig": {
    "defaults": {
      "custom": {
        "drawStyle": "bars",
        "barAlignment": 0,
        "fillOpacity": 80
      }
    },
    "overrides": [
      {
        "matcher": {"id": "byName", "options": "Trades/min"},
        "properties": [
          {"id": "unit", "value": "trades/min"},
          {"id": "custom.axisPlacement", "value": "left"}
        ]
      },
      {
        "matcher": {"id": "byName", "options": "Volume USD/min"},
        "properties": [
          {"id": "unit", "value": "currencyUSD"},
          {"id": "custom.axisPlacement", "value": "right"}
        ]
      }
    ]
  }
}

# Panel 5: Fill Rate and Rejection Rate
{
  "id": 5,
  "gridPos": {"h": 8, "w": 8, "x": 16, "y": 8},
  "type": "gauge",
  "title": "Order Metrics",
  "datasource": "Prometheus",
  "targets": [
    {
      "expr": "sum(rate(hft_orders_filled_total[5m])) / sum(rate(hft_orders_sent_total[5m])) * 100",
      "legendFormat": "Fill Rate %",
      "refId": "A"
    },
    {
      "expr": "sum(rate(hft_orders_rejected_total[5m])) / sum(rate(hft_orders_sent_total[5m])) * 100",
      "legendFormat": "Rejection Rate %",
      "refId": "B"
    },
    {
      "expr": "sum(rate(hft_orders_cancelled_total[5m])) / sum(rate(hft_orders_sent_total[5m])) * 100",
      "legendFormat": "Cancel Rate %",
      "refId": "C"
    }
  ],
  "fieldConfig": {
    "defaults": {
      "unit": "percent",
      "min": 0,
      "max": 100,
      "thresholds": {
        "mode": "absolute",
        "steps": [
          {"value": null, "color": "green"},
          {"value": 70, "color": "yellow"},
          {"value": 90, "color": "red"}
        ]
      }
    },
    "overrides": [
      {
        "matcher": {"id": "byName", "options": "Fill Rate %"},
        "properties": [
          {
            "id": "thresholds",
            "value": {
              "mode": "absolute",
              "steps": [
                {"value": null, "color": "red"},
                {"value": 80, "color": "yellow"},
                {"value": 95, "color": "green"}
              ]
            }
          }
        ]
      }
    ]
  },
  "options": {
    "orientation": "horizontal",
    "showThresholdLabels": true,
    "showThresholdMarkers": true
  }
}

================================================================================
PANEL CONFIGURATIONS - POSITION AND RISK MONITORING
================================================================================

# Panel 6: Position Exposure by Symbol
{
  "id": 6,
  "gridPos": {"h": 8, "w": 12, "x": 0, "y": 16},
  "type": "bargauge",
  "title": "Current Position Exposure (USD)",
  "datasource": "Prometheus",
  "targets": [
    {
      "expr": "hft_position_exposure_usd{symbol=~\"$symbol\"}",
      "legendFormat": "{{symbol}}",
      "refId": "A"
    }
  ],
  "fieldConfig": {
    "defaults": {
      "unit": "currencyUSD",
      "thresholds": {
        "mode": "percentage",
        "steps": [
          {"value": null, "color": "green"},
          {"value": 60, "color": "yellow"},
          {"value": 80, "color": "red"}
        ]
      },
      "min": -1000000,
      "max": 1000000,
      "decimals": 0
    }
  },
  "options": {
    "orientation": "horizontal",
    "displayMode": "gradient",
    "showUnfilled": true,
    "minVizWidth": 0,
    "minVizHeight": 10
  },
  "transformations": [
    {
      "id": "sortBy",
      "options": {
        "fields": {},
        "sort": [{"field": "Value", "desc": true}]
      }
    }
  ]
}

# Panel 7: Risk Metrics Table
{
  "id": 7,
  "gridPos": {"h": 8, "w": 12, "x": 12, "y": 16},
  "type": "table",
  "title": "Real-Time Risk Metrics",
  "datasource": "Prometheus",
  "targets": [
    {
      "expr": "hft_risk_var_usd",
      "legendFormat": "",
      "refId": "A",
      "format": "table",
      "instant": true
    },
    {
      "expr": "hft_risk_sharpe_ratio",
      "legendFormat": "",
      "refId": "B",
      "format": "table",
      "instant": true
    },
    {
      "expr": "hft_risk_max_drawdown_usd",
      "legendFormat": "",
      "refId": "C",
      "format": "table",
      "instant": true
    },
    {
      "expr": "hft_position_count",
      "legendFormat": "",
      "refId": "D",
      "format": "table",
      "instant": true
    }
  ],
  "transformations": [
    {
      "id": "merge",
      "options": {}
    },
    {
      "id": "organize",
      "options": {
        "excludeByName": {
          "Time": true,
          "__name__": true,
          "job": true,
          "instance": true
        },
        "renameByPattern": {
          "Value #A": "VaR (USD)",
          "Value #B": "Sharpe Ratio",
          "Value #C": "Max Drawdown (USD)",
          "Value #D": "Position Count"
        }
      }
    }
  ],
  "fieldConfig": {
    "defaults": {
      "custom": {
        "align": "center",
        "displayMode": "auto"
      }
    },
    "overrides": [
      {
        "matcher": {"id": "byName", "options": "VaR (USD)"},
        "properties": [
          {"id": "unit", "value": "currencyUSD"},
          {"id": "decimals", "value": 0},
          {
            "id": "custom.displayMode",
            "value": "color-background"
          },
          {
            "id": "thresholds",
            "value": {
              "mode": "absolute",
              "steps": [
                {"value": null, "color": "green"},
                {"value": 10000, "color": "yellow"},
                {"value": 50000, "color": "red"}
              ]
            }
          }
        ]
      },
      {
        "matcher": {"id": "byName", "options": "Sharpe Ratio"},
        "properties": [
          {"id": "decimals", "value": 2},
          {
            "id": "custom.displayMode",
            "value": "color-text"
          },
          {
            "id": "thresholds",
            "value": {
              "mode": "absolute",
              "steps": [
                {"value": null, "color": "red"},
                {"value": 1, "color": "yellow"},
                {"value": 2, "color": "green"}
              ]
            }
          }
        ]
      }
    ]
  }
}

================================================================================
PANEL CONFIGURATIONS - SYSTEM HEALTH
================================================================================

# Panel 8: System Latency Overview (Stat Panel)
{
  "id": 8,
  "gridPos": {"h": 4, "w": 6, "x": 0, "y": 24},
  "type": "stat",
  "title": "Avg Order Latency",
  "datasource": "Prometheus",
  "targets": [
    {
      "expr": "histogram_quantile(0.50, sum(rate(hft_order_latency_microseconds_bucket[1m])) by (le))",
      "refId": "A"
    }
  ],
  "fieldConfig": {
    "defaults": {
      "unit": "µs",
      "decimals": 0,
      "thresholds": {
        "mode": "absolute",
        "steps": [
          {"value": null, "color": "green"},
          {"value": 200, "color": "yellow"},
          {"value": 500, "color": "red"}
        ]
      }
    }
  },
  "options": {
    "graphMode": "area",
    "colorMode": "background",
    "justifyMode": "center",
    "textMode": "value_and_name",
    "reduceOptions": {
      "values": false,
      "calcs": ["lastNotNull"]
    }
  }
}

# Panel 9: CPU Usage
{
  "id": 9,
  "gridPos": {"h": 4, "w": 6, "x": 6, "y": 24},
  "type": "stat",
  "title": "CPU Usage",
  "datasource": "Prometheus",
  "targets": [
    {
      "expr": "100 - (avg(irate(node_cpu_seconds_total{mode=\"idle\"}[1m])) * 100)",
      "refId": "A"
    }
  ],
  "fieldConfig": {
    "defaults": {
      "unit": "percent",
      "decimals": 1,
      "thresholds": {
        "mode": "absolute",
        "steps": [
          {"value": null, "color": "green"},
          {"value": 70, "color": "yellow"},
          {"value": 85, "color": "red"}
        ]
      }
    }
  },
  "options": {
    "graphMode": "area",
    "colorMode": "background"
  }
}

# Panel 10: Memory Usage
{
  "id": 10,
  "gridPos": {"h": 4, "w": 6, "x": 12, "y": 24},
  "type": "stat",
  "title": "Memory Usage",
  "datasource": "Prometheus",
  "targets": [
    {
      "expr": "(1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100",
      "refId": "A"
    }
  ],
  "fieldConfig": {
    "defaults": {
      "unit": "percent",
      "decimals": 1,
      "thresholds": {
        "mode": "absolute",
        "steps": [
          {"value": null, "color": "green"},
          {"value": 75, "color": "yellow"},
          {"value": 90, "color": "red"}
        ]
      }
    }
  },
  "options": {
    "graphMode": "area",
    "colorMode": "background"
  }
}

# Panel 11: Network Throughput
{
  "id": 11,
  "gridPos": {"h": 4, "w": 6, "x": 18, "y": 24},
  "type": "stat",
  "title": "Network Throughput",
  "datasource": "Prometheus",
  "targets": [
    {
      "expr": "sum(rate(node_network_receive_bytes_total[1m]) + rate(node_network_transmit_bytes_total[1m]))",
      "refId": "A"
    }
  ],
  "fieldConfig": {
    "defaults": {
      "unit": "Bps",
      "decimals": 0,
      "thresholds": {
        "mode": "absolute",
        "steps": [
          {"value": null, "color": "green"},
          {"value": 100000000, "color": "yellow"},
          {"value": 900000000, "color": "red"}
        ]
      }
    }
  },
  "options": {
    "graphMode": "area",
    "colorMode": "value"
  }
}

================================================================================
ALERTING RULES CONFIGURATION
================================================================================

# Prometheus Alerting Rules for HFT System
groups:
  - name: hft_trading_alerts
    interval: 5s
    rules:
      # Latency Alerts
      - alert: HighOrderLatency
        expr: histogram_quantile(0.99, sum(rate(hft_order_latency_microseconds_bucket[1m])) by (le)) > 1000
        for: 30s
        labels:
          severity: warning
          component: execution
        annotations:
          summary: "High order latency detected"
          description: "P99 order latency is {{ $value }}µs (threshold: 1000µs)"

      - alert: CriticalOrderLatency
        expr: histogram_quantile(0.99, sum(rate(hft_order_latency_microseconds_bucket[1m])) by (le)) > 5000
        for: 10s
        labels:
          severity: critical
          component: execution
        annotations:
          summary: "CRITICAL: Order latency exceeds 5ms"
          description: "P99 order latency is {{ $value }}µs - immediate action required"

      # Market Data Alerts
      - alert: MarketDataStale
        expr: time() - hft_market_data_last_update_timestamp > 1
        for: 1s
        labels:
          severity: critical
          component: market_data
        annotations:
          summary: "Market data feed stale"
          description: "No market data updates for {{ $value }}s for {{ $labels.symbol }}"

      - alert: MarketDataGapDetected
        expr: increase(hft_market_data_gaps_total[1m]) > 0
        for: 0s
        labels:
          severity: warning
          component: market_data
        annotations:
          summary: "Market data gaps detected"
          description: "{{ $value }} gaps detected in {{ $labels.symbol }} feed"

      # Risk Alerts
      - alert: VaRLimitBreach
        expr: hft_risk_var_usd > 100000
        for: 0s
        labels:
          severity: critical
          component: risk
        annotations:
          summary: "VaR limit breached"
          description: "VaR is ${{ $value }} (limit: $100,000)"

      - alert: MaxDrawdownExceeded
        expr: abs(hft_risk_max_drawdown_usd) > 50000
        for: 1m
        labels:
          severity: warning
          component: risk
        annotations:
          summary: "Maximum drawdown threshold exceeded"
          description: "Current drawdown: ${{ $value }}"

      - alert: PositionLimitBreach
        expr: abs(hft_position_exposure_usd) > 1000000
        for: 0s
        labels:
          severity: critical
          component: risk
        annotations:
          summary: "Position limit breached for {{ $labels.symbol }}"
          description: "Position exposure: ${{ $value }} (limit: $1M)"

      # Trading Performance Alerts
      - alert: LowFillRate
        expr: (sum(rate(hft_orders_filled_total[5m])) / sum(rate(hft_orders_sent_total[5m])) * 100) < 70
        for: 2m
        labels:
          severity: warning
          component: execution
        annotations:
          summary: "Low fill rate detected"
          description: "Fill rate is {{ $value }}% (threshold: 70%)"

      - alert: HighRejectionRate
        expr: (sum(rate(hft_orders_rejected_total[1m])) / sum(rate(hft_orders_sent_total[1m])) * 100) > 5
        for: 1m
        labels:
          severity: warning
          component: execution
        annotations:
          summary: "High order rejection rate"
          description: "Rejection rate is {{ $value }}% (threshold: 5%)"

      # System Health Alerts
      - alert: HighCPUUsage
        expr: 100 - (avg(irate(node_cpu_seconds_total{mode="idle"}[1m])) * 100) > 85
        for: 2m
        labels:
          severity: warning
          component: system
        annotations:
          summary: "High CPU usage detected"
          description: "CPU usage is {{ $value }}%"

      - alert: HighMemoryUsage
        expr: (1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100 > 90
        for: 2m
        labels:
          severity: critical
          component: system
        annotations:
          summary: "High memory usage detected"
          description: "Memory usage is {{ $value }}%"

      - alert: DiskSpaceLow
        expr: (node_filesystem_avail_bytes / node_filesystem_size_bytes) * 100 < 10
        for: 5m
        labels:
          severity: warning
          component: system
        annotations:
          summary: "Low disk space"
          description: "Only {{ $value }}% disk space remaining on {{ $labels.mountpoint }}"

================================================================================
PROMETHEUS RECORDING RULES
================================================================================

# Recording Rules for Performance Optimization
groups:
  - name: hft_recording_rules
    interval: 5s
    rules:
      # Pre-compute latency percentiles
      - record: hft:order_latency:p50
        expr: histogram_quantile(0.50, sum(rate(hft_order_latency_microseconds_bucket[1m])) by (le, exchange))

      - record: hft:order_latency:p95
        expr: histogram_quantile(0.95, sum(rate(hft_order_latency_microseconds_bucket[1m])) by (le, exchange))

      - record: hft:order_latency:p99
        expr: histogram_quantile(0.99, sum(rate(hft_order_latency_microseconds_bucket[1m])) by (le, exchange))

      - record: hft:order_latency:p999
        expr: histogram_quantile(0.999, sum(rate(hft_order_latency_microseconds_bucket[1m])) by (le, exchange))

      # Pre-compute trading metrics
      - record: hft:trades:rate1m
        expr: sum(rate(hft_trades_total[1m])) by (strategy, symbol)

      - record: hft:volume:rate1m
        expr: sum(rate(hft_trade_volume_usd[1m])) by (strategy, symbol)

      - record: hft:pnl:1h_change
        expr: hft_strategy_pnl_usd - (hft_strategy_pnl_usd offset 1h)

      - record: hft:pnl:daily_return
        expr: (hft_strategy_pnl_usd / (hft_strategy_pnl_usd offset 24h) - 1) * 100

      # Pre-compute fill rates
      - record: hft:fill_rate:5m
        expr: sum(rate(hft_orders_filled_total[5m])) by (strategy, exchange) / sum(rate(hft_orders_sent_total[5m])) by (strategy, exchange) * 100

      - record: hft:rejection_rate:5m
        expr: sum(rate(hft_orders_rejected_total[5m])) by (strategy, exchange) / sum(rate(hft_orders_sent_total[5m])) by (strategy, exchange) * 100

      # System metrics
      - record: instance:cpu_usage:rate1m
        expr: 100 - (avg by (instance)(irate(node_cpu_seconds_total{mode="idle"}[1m])) * 100)

      - record: instance:memory_usage:percent
        expr: (1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100

================================================================================
GRAFANA DATASOURCE CONFIGURATION
================================================================================

# Prometheus Datasource
apiVersion: 1
datasources:
  - name: Prometheus
    type: prometheus
    access: proxy
    url: http://prometheus:9090
    isDefault: true
    jsonData:
      timeInterval: "100ms"
      queryTimeout: "30s"
      httpMethod: "POST"
      customQueryParameters: ""
      exemplarTraceIdDestinations:
        - name: trace_id
          datasourceUid: tempo
    editable: true

  - name: PostgreSQL
    type: postgres
    url: postgres:5432
    database: hft_trading
    user: grafana_reader
    secureJsonData:
      password: ${POSTGRES_PASSWORD}
    jsonData:
      sslmode: "require"
      maxOpenConns: 10
      maxIdleConns: 2
      connMaxLifetime: 3600
      postgresVersion: 1400
      timescaledb: true

  - name: TimescaleDB
    type: postgres
    url: timescaledb:5432
    database: trading_metrics
    user: grafana_reader
    jsonData:
      sslmode: "require"
      timescaledb: true

  - name: InfluxDB
    type: influxdb
    url: http://influxdb:8086
    database: hft_metrics
    user: grafana
    jsonData:
      version: "InfluxQL"
      timeInterval: "100ms"

================================================================================
DASHBOARD PROVISIONING CONFIGURATION
================================================================================

# dashboards.yml - Auto-provision dashboards
apiVersion: 1

providers:
  - name: 'HFT Trading Dashboards'
    orgId: 1
    folder: 'HFT'
    type: file
    disableDeletion: false
    updateIntervalSeconds: 30
    allowUiUpdates: true
    options:
      path: /etc/grafana/provisioning/dashboards/hft
      foldersFromFilesStructure: true

  - name: 'System Monitoring'
    orgId: 1
    folder: 'Infrastructure'
    type: file
    options:
      path: /etc/grafana/provisioning/dashboards/system

================================================================================
GRAFANA CONFIGURATION (grafana.ini)
================================================================================

[server]
protocol = http
http_addr = 0.0.0.0
http_port = 3000
domain = trading-dashboard.example.com
root_url = %(protocol)s://%(domain)s:%(http_port)s/

[database]
type = postgres
host = postgres:5432
name = grafana
user = grafana
password = ${GRAFANA_DB_PASSWORD}
ssl_mode = require

[security]
admin_user = admin
admin_password = ${GRAFANA_ADMIN_PASSWORD}
secret_key = ${GRAFANA_SECRET_KEY}
disable_gravatar = true
cookie_secure = true
cookie_samesite = strict

[auth]
disable_login_form = false
oauth_auto_login = false

[users]
allow_sign_up = false
allow_org_create = false
auto_assign_org = true
auto_assign_org_role = Viewer

[alerting]
enabled = true
execute_alerts = true
evaluation_timeout_seconds = 30
notification_timeout_seconds = 30
max_attempts = 3

[unified_alerting]
enabled = true
min_interval = 1s

[metrics]
enabled = true
interval_seconds = 10

[log]
mode = console
level = info

[explore]
enabled = true

[feature_toggles]
enable = publicDashboards

================================================================================
NOTIFICATION CHANNELS CONFIGURATION
================================================================================

# PagerDuty Integration
{
  "name": "PagerDuty - Critical",
  "type": "pagerduty",
  "uid": "pagerduty-critical",
  "isDefault": false,
  "sendReminder": false,
  "disableResolveMessage": false,
  "settings": {
    "integrationKey": "${PAGERDUTY_INTEGRATION_KEY}",
    "severity": "critical",
    "autoResolve": true
  }
}

# Slack Integration
{
  "name": "Slack - Trading Alerts",
  "type": "slack",
  "uid": "slack-trading",
  "isDefault": true,
  "sendReminder": true,
  "settings": {
    "url": "${SLACK_WEBHOOK_URL}",
    "recipient": "#trading-alerts",
    "username": "HFT Monitor",
    "icon_emoji": ":chart_with_upwards_trend:",
    "mentionChannel": "here",
    "mentionUsers": "",
    "mentionGroups": ""
  }
}

# Email Notifications
{
  "name": "Email - Risk Team",
  "type": "email",
  "uid": "email-risk",
  "isDefault": false,
  "sendReminder": false,
  "settings": {
    "addresses": "risk-team@example.com;trading-ops@example.com",
    "singleEmail": false
  }
}

# Webhook for Custom Integration
{
  "name": "Risk Management System",
  "type": "webhook",
  "uid": "webhook-rms",
  "isDefault": false,
  "settings": {
    "url": "https://risk-system.example.com/api/alerts",
    "httpMethod": "POST",
    "username": "${WEBHOOK_USER}",
    "password": "${WEBHOOK_PASSWORD}",
    "authorization": "Bearer",
    "maxAlerts": 0
  }
}

================================================================================
END OF GRAFANA TRADING DASHBOARDS CONFIGURATION
================================================================================
