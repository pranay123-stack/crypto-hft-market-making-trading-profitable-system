================================================================================
COMPREHENSIVE DEVELOPER CONFIGURATION GUIDE
================================================================================

OVERVIEW:
--------
This file contains all configuration parameters for developers managing the
HFT system. Covers build, deployment, debugging, monitoring, and operations.

Format: YAML with detailed explanations
Location: /config/developer_<name>.yaml
Hot Reload: Supported for non-critical parameters
Environment: dev | staging | production

================================================================================
COMPLETE DEVELOPER CONFIGURATION (YAML)
================================================================================

# developer_config.yaml - Complete Template
---
# ============================================================================
# DEVELOPER IDENTIFICATION
# ============================================================================
developer:
  id: "DEV_001"
  name: "Bob Johnson"
  email: "bob.johnson@company.com"
  role: "Senior C++ Developer"
  team: "Core Trading Infrastructure"
  location: "New York"
  timezone: "America/New_York"
  start_date: "2024-03-15"

  # Access level
  access_level: "senior"  # junior | mid | senior | lead | architect

  # Specializations
  specializations:
    - "low_latency_cpp"
    - "network_programming"
    - "system_optimization"

  # On-call rotation
  oncall:
    enabled: true
    schedule: "weeks_1_3"  # Weeks 1 and 3 of each month
    primary_contact: "+1-555-0200"
    secondary_contact: "bob.johnson@company.com"

# ============================================================================
# BUILD CONFIGURATION
# ============================================================================
build:
  # Build system
  system: "cmake"
  cmake_version: "3.25.0"
  generator: "Ninja"  # Ninja | Make | Xcode

  # Compiler settings
  compiler:
    cpp_compiler: "/usr/bin/g++-11"
    c_compiler: "/usr/bin/gcc-11"
    cpp_standard: "20"  # C++20

    # Optimization flags
    optimization:
      debug: "-O0 -g3 -fno-omit-frame-pointer"
      release: "-O3 -march=native -mtune=native"
      release_with_debug: "-O2 -g -DNDEBUG"

    # Warning flags
    warnings: "-Wall -Wextra -Wpedantic -Werror"

    # Sanitizers (development only)
    sanitizers:
      address: "-fsanitize=address -fno-omit-frame-pointer"
      thread: "-fsanitize=thread"
      undefined: "-fsanitize=undefined"
      memory: "-fsanitize=memory"

  # Build types
  build_types:
    - name: "Debug"
      flags: "${optimization.debug} ${warnings}"
      defines: ["DEBUG=1", "LOG_LEVEL=TRACE"]

    - name: "Release"
      flags: "${optimization.release} ${warnings}"
      defines: ["NDEBUG=1", "LOG_LEVEL=INFO"]
      lto: true  # Link-time optimization

    - name: "RelWithDebInfo"
      flags: "${optimization.release_with_debug} ${warnings}"
      defines: ["NDEBUG=1", "LOG_LEVEL=DEBUG"]

    - name: "Profiling"
      flags: "-O2 -g -pg"  # For gprof
      defines: ["PROFILING=1"]

  # Dependencies
  dependencies:
    package_manager: "conan"  # conan | vcpkg
    conan_profile: "gcc11_x64"

    libraries:
      - name: "boost"
        version: "1.82.0"
        components: ["system", "thread", "asio", "beast"]

      - name: "spdlog"
        version: "1.12.0"

      - name: "simdjson"
        version: "3.2.0"

      - name: "catch2"
        version: "3.4.0"

      - name: "benchmark"
        version: "1.8.0"

  # Build cache
  cache:
    ccache_enabled: true
    ccache_dir: "/var/cache/ccache"
    ccache_max_size: "50G"

  # Parallel builds
  parallel:
    jobs: 16  # Number of parallel jobs
    load_average: 12  # Don't start new jobs if load > 12

  # Build artifacts
  artifacts:
    output_dir: "/build/${environment}/${build_type}"
    install_prefix: "/opt/hft-system"

# ============================================================================
# DEVELOPMENT ENVIRONMENT
# ============================================================================
environment:
  # Active environment
  active: "dev"  # dev | staging | production

  # Environment-specific settings
  dev:
    database:
      host: "localhost"
      port: 5432
      name: "hft_dev"
      user: "dev_user"
      ssl: false

    redis:
      host: "localhost"
      port: 6379
      db: 0

    exchange_mode: "paper_trading"
    log_level: "DEBUG"
    enable_profiling: true
    hot_reload: true

  staging:
    database:
      host: "staging-db.internal"
      port: 5432
      name: "hft_staging"
      user: "staging_user"
      ssl: true

    redis:
      host: "staging-redis.internal"
      port: 6379
      db: 0

    exchange_mode: "paper_trading"
    log_level: "INFO"
    enable_profiling: false
    hot_reload: false

  production:
    database:
      host: "prod-db.internal"
      port: 5432
      name: "hft_prod"
      user: "prod_user"
      ssl: true
      connection_pool_size: 20

    redis:
      host: "prod-redis.internal"
      port: 6379
      db: 0
      connection_pool_size: 10

    exchange_mode: "live_trading"
    log_level: "WARN"
    enable_profiling: false
    hot_reload: false

# ============================================================================
# SYSTEM PERFORMANCE TUNING
# ============================================================================
performance:
  # CPU configuration
  cpu:
    # CPU affinity (pin threads to cores)
    affinity_enabled: true
    trading_threads: [0, 1, 2, 3]  # Cores 0-3
    network_threads: [4, 5]        # Cores 4-5
    monitoring_threads: [6, 7]     # Cores 6-7

    # CPU governor
    governor: "performance"  # performance | powersave | ondemand

    # Disable C-states for consistent latency
    disable_cstates: true

    # Disable hyperthreading for latency-critical cores
    hyperthreading_disabled: [0, 1, 2, 3]

  # Memory configuration
  memory:
    # Huge pages
    huge_pages_enabled: true
    huge_pages_count: 1024  # 2GB of huge pages

    # Memory locking (prevent swapping)
    mlock_enabled: true
    mlock_limit: "16G"

    # NUMA configuration
    numa_enabled: true
    numa_node: 0  # Bind to NUMA node 0

    # Swap
    swappiness: 0  # Disable swap

  # Network configuration
  network:
    # NIC tuning
    ring_buffer_size: 4096
    interrupt_coalescing: 0  # Disable for min latency

    # Kernel parameters
    tcp_timestamps: true
    tcp_tw_reuse: true
    tcp_fin_timeout: 30
    tcp_keepalive_time: 120

    # Socket buffer sizes
    rmem_max: 134217728  # 128MB
    wmem_max: 134217728
    rmem_default: 16777216  # 16MB
    wmem_default: 16777216

  # I/O configuration
  io:
    scheduler: "none"  # none | deadline | cfq
    read_ahead_kb: 0  # Disable read-ahead for low latency

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
logging:
  # Log levels by component
  levels:
    root: "INFO"
    trading_engine: "DEBUG"
    order_manager: "DEBUG"
    risk_manager: "INFO"
    market_data: "WARN"
    network: "INFO"
    database: "WARN"

  # Log outputs
  outputs:
    - type: "file"
      path: "/var/log/hft/trading.log"
      level: "DEBUG"
      rotation: "daily"
      retention_days: 30

    - type: "file"
      path: "/var/log/hft/errors.log"
      level: "ERROR"
      rotation: "daily"
      retention_days: 90

    - type: "console"
      level: "INFO"
      colored: true

    - type: "syslog"
      level: "WARN"
      facility: "local0"

  # Async logging (better performance)
  async_enabled: true
  queue_size: 1048576  # 1M messages

  # Log format
  format: "[{timestamp}] [{level}] [{thread}] [{logger}] {message}"
  timestamp_format: "%Y-%m-%d %H:%M:%S.%f"

  # Performance logging
  performance_logging:
    enabled: true
    latency_threshold_us: 1000  # Log if > 1ms
    sample_rate: 0.01  # Sample 1% of operations

# ============================================================================
# MONITORING & METRICS
# ============================================================================
monitoring:
  # Prometheus metrics
  prometheus:
    enabled: true
    port: 9090
    path: "/metrics"
    scrape_interval_seconds: 5

    # Metrics to collect
    metrics:
      - "order_latency_microseconds"
      - "market_data_latency_microseconds"
      - "orders_per_second"
      - "fills_per_second"
      - "pnl_total"
      - "position_count"
      - "risk_utilization"
      - "cpu_usage_percent"
      - "memory_usage_bytes"
      - "network_bytes_sent"
      - "network_bytes_received"

  # Grafana dashboards
  grafana:
    url: "http://grafana.internal:3000"
    dashboards:
      - "trading-overview"
      - "latency-analysis"
      - "system-health"
      - "pnl-tracking"

  # Application Performance Monitoring
  apm:
    enabled: true
    service_name: "hft-trading-system"
    environment: "${environment.active}"
    sample_rate: 1.0  # 100% sampling in dev/staging

  # Health checks
  health_checks:
    enabled: true
    port: 8080
    endpoints:
      - path: "/health"
        interval_seconds: 5
      - path: "/ready"
        interval_seconds: 10

# ============================================================================
# TESTING CONFIGURATION
# ============================================================================
testing:
  # Unit tests
  unit_tests:
    framework: "catch2"
    parallel_execution: true
    junit_output: "/test-results/unit/results.xml"
    coverage_enabled: true
    coverage_target: 85  # 85% coverage required

  # Integration tests
  integration_tests:
    framework: "catch2"
    database_required: true
    redis_required: true
    mock_exchanges: true
    timeout_seconds: 300

  # Performance tests
  performance_tests:
    enabled: true
    latency_targets:
      order_submission_p99_us: 50
      market_data_processing_p99_us: 5
      risk_check_p99_us: 10

    throughput_targets:
      orders_per_second: 10000
      market_data_messages_per_second: 1000000

  # Stress tests
  stress_tests:
    enabled: true
    duration_seconds: 3600  # 1 hour
    load_multiplier: 10  # 10x normal load

  # Test data
  test_data:
    fixtures_dir: "/test/fixtures"
    market_data_samples: "/test/data/market_data.csv"
    order_samples: "/test/data/orders.csv"

# ============================================================================
# DEPLOYMENT CONFIGURATION
# ============================================================================
deployment:
  # Deployment strategy
  strategy: "blue_green"  # blue_green | canary | rolling

  # Pre-deployment checks
  pre_deployment_checks:
    - "unit_tests_pass"
    - "integration_tests_pass"
    - "performance_tests_pass"
    - "security_scan_pass"
    - "code_review_approved"
    - "changelog_updated"

  # Deployment process
  process:
    - step: "build"
      command: "./scripts/build.sh ${environment}"
      timeout_seconds: 300

    - step: "test"
      command: "./scripts/test.sh"
      timeout_seconds: 600

    - step: "package"
      command: "./scripts/package.sh"
      timeout_seconds: 60

    - step: "deploy"
      command: "./scripts/deploy.sh ${environment}"
      timeout_seconds: 300
      requires_approval: true

    - step: "smoke_test"
      command: "./scripts/smoke_test.sh"
      timeout_seconds: 120

  # Rollback configuration
  rollback:
    automatic: false  # Require manual rollback
    max_rollback_window_hours: 24
    keep_previous_versions: 5

  # Notifications
  notifications:
    on_start:
      - "slack:#deployments"
      - "email:dev-team@company.com"

    on_success:
      - "slack:#deployments"

    on_failure:
      - "slack:#incidents"
      - "sms:+1-555-0200"
      - "pagerduty:DEV_TEAM"

# ============================================================================
# DEBUGGING & PROFILING
# ============================================================================
debugging:
  # Core dumps
  core_dumps:
    enabled: true
    path: "/var/core"
    pattern: "core.%e.%p.%t"  # executable.pid.timestamp
    ulimit_core: "unlimited"

  # GDB settings
  gdb:
    history_file: "~/.gdb_history"
    pretty_printers: true
    auto_load_scripts: true

  # Valgrind
  valgrind:
    suppressions: "/config/valgrind.supp"
    leak_check: "full"
    show_reachable: true

  # Profiling tools
  profiling:
    perf_enabled: true
    perf_frequency: 999  # Hz
    flame_graph_enabled: true

    gprof_enabled: false  # High overhead
    callgrind_enabled: false

  # Debug symbols
  debug_symbols:
    separate_debug_info: true
    debug_info_dir: "/usr/lib/debug"
    symbol_server: "http://symbols.internal"

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================
security:
  # Access control
  access:
    ssh_keys_path: "~/.ssh/authorized_keys"
    require_2fa: true

    # IP whitelist for production access
    ip_whitelist_production:
      - "192.168.1.0/24"
      - "10.0.0.0/16"

  # Secrets management
  secrets:
    provider: "vault"  # vault | aws_secrets_manager | azure_keyvault
    vault_url: "https://vault.internal:8200"
    vault_token_path: "~/.vault-token"

    # API keys
    api_keys:
      binance: "vault:secret/exchanges/binance"
      coinbase: "vault:secret/exchanges/coinbase"
      database: "vault:secret/database/credentials"

  # Code signing
  code_signing:
    enabled: true
    gpg_key_id: "ABC123DEF456"

  # Security scanning
  scanning:
    static_analysis: "cppcheck"
    dependency_check: "snyk"
    container_scan: "trivy"

# ============================================================================
# VERSION CONTROL & CI/CD
# ============================================================================
git:
  # Repository
  remote: "git@github.com:company/hft-system.git"
  branch: "main"

  # Commit hooks
  pre_commit_hooks:
    - "format_check"
    - "lint"
    - "unit_tests"

  # Commit message format
  commit_format: "<type>(<scope>): <subject>"
  types: ["feat", "fix", "perf", "refactor", "test", "docs"]

ci_cd:
  # CI platform
  platform: "github_actions"  # github_actions | jenkins | gitlab_ci

  # Pipeline stages
  stages:
    - name: "build"
      parallel: true
      jobs:
        - "build_debug"
        - "build_release"

    - name: "test"
      parallel: true
      jobs:
        - "unit_tests"
        - "integration_tests"
        - "performance_tests"

    - name: "analysis"
      parallel: true
      jobs:
        - "static_analysis"
        - "security_scan"
        - "coverage_report"

    - name: "deploy"
      jobs:
        - "deploy_staging"  # Auto
        - "deploy_production"  # Manual approval required

# ============================================================================
# DEVELOPER TOOLS
# ============================================================================
tools:
  # IDE/Editor
  ide:
    name: "vscode"  # vscode | clion | vim
    settings_path: ".vscode/settings.json"
    extensions:
      - "ms-vscode.cpptools"
      - "llvm-vs-code-extensions.vscode-clangd"
      - "xaver.clang-format"

  # Code formatter
  formatter:
    tool: "clang-format"
    version: "14.0"
    style_file: ".clang-format"
    format_on_save: true

  # Linter
  linter:
    tool: "clang-tidy"
    config_file: ".clang-tidy"
    checks: "modernize-*,performance-*,readability-*"

  # Documentation
  documentation:
    tool: "doxygen"
    config_file: "Doxyfile"
    output_dir: "/docs/api"

================================================================================
USAGE GUIDE
================================================================================

DAILY DEVELOPMENT WORKFLOW:
1. Pull latest code: git pull origin main
2. Start development environment: ./dev_env.sh start
3. Make changes
4. Run tests: ./scripts/test.sh
5. Commit: git commit -m "feat(trading): add new strategy"
6. Push: git push origin feature-branch
7. Create PR

DEPLOYMENT WORKFLOW:
1. Merge PR to main
2. CI/CD automatically builds and tests
3. Deploy to staging: Auto
4. Run smoke tests: ./scripts/smoke_test.sh staging
5. Deploy to production: Requires approval
6. Monitor for 1 hour

TROUBLESHOOTING:
- Build fails: Check build logs in /build/logs/
- Tests fail: Run with verbose: ctest -V
- Performance issues: Enable profiling and run perf
- Memory leaks: Run valgrind

EMERGENCY PROCEDURES:
1. Production issue detected
2. Check monitoring dashboards
3. Review logs: tail -f /var/log/hft/errors.log
4. If critical: Execute rollback
5. Fix issue in development
6. Deploy hotfix with expedited testing

================================================================================

Version: 2.0
Last Updated: 2025-11-25
Owner: Engineering Team
